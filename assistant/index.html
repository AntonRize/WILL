---
layout: default
title: "WILL AI"
permalink: /WILL-AI/
---

<div id="root"></div>

<style>
    body { 
        margin: 0; 
        background-color: #111827; /* Dark background for the whole page */
    }
    textarea::-webkit-scrollbar{
        width:4px
    }
    /* This rule ensures paragraphs inside the AI response have spacing */
    .ai-message-bubble p {
        margin-bottom: 1em;
    }
    /* Removes margin from the very last paragraph to avoid extra space at the bottom */
    .ai-message-bubble p:last-child {
        margin-bottom: 0;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
    const {useState, useEffect, useRef} = React;
    const FILES = [
        'WILL%20DATABASE/WILL-PART-I.txt',
        'WILL%20DATABASE/WILL-APENDIX-I.txt',
        'WILL%20DATABASE/WILL-PART-II-COSMO.txt',
        'WILL%20DATABASE/WILL-PART-III-QM.txt',
    ];
    const CORE = `β (beta)=v/c  ·  κ (kappa)=vₑ/c  ·  κ²=2β²`;
    const PROXY = 'https://proxy-flame-seven.vercel.app/api/gemini';
    const LOG_API = 'https://proxy-flame-seven.vercel.app/api/save_log';
    const QUICK = {
        'beta':  'β (beta) is the kinematic projection v / c. Together with κ it obeys κ² = 2 β².',
        'β':     'β (beta) is the kinematic projection v / c. Together with κ it obeys κ² = 2 β².',
        'kappa': 'κ (kappa) is the gravitational projection vₑ / c. Relation κ² = 2 β².',
        'κ':     'κ (kappa) is the gravitational projection vₑ / c. Relation κ² = 2 β².'
    };
    function loadKB(){
        const base='https://raw.githubusercontent.com/AntonRize/WILL/main/';
        return Promise.all(FILES.map(p=>fetch(base+p).then(r=>{
            if(!r.ok)throw new Error('KB fetch '+r.status);
            return r.text();
        }))).then(t=>t.join('\n\n').replace(/\\beta/g,'β (beta)').replace(/\\kappa/g,'κ (kappa)'));
    }
    function askGemini(prompt){
        return fetch(PROXY,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt})})
            .then(r=>r.text())
            .then(t=>{let d;try{d=JSON.parse(t);}catch{throw new Error(t);}if(!d.reply)throw new Error(d.error||'Proxy');return d.reply;});
    }
    const isRu=s=>/[а-яё]/i.test(s);

    function App(){
        const [kb,setKb]=useState('');
        const [ks,setKs]=useState('loading');
        const welcome={
            id:0,
            txt:marked.parse("👋 **Hi! I am WILL AI**\n\nAsk me anything about WILL Relational Geometry.\n\n**Disclaimer:** I can make mistakes - always doublechek with WILL original documentation."),
            user:false,
            isWelcome:true,
            raw:"👋 Hi! I am WILL AI Ask me anything about WILL Relational Geometry. Disclaimer: I can make mistakes - always doublechek with WILL original documentation."
        };
        const [log,setLog]=useState([welcome]);
        const logRef=useRef([welcome]);
        const [inp,setInp]=useState('');
        const [busy,setBusy]=useState(false);
        const endRef=useRef(null);
        const textRef=useRef(null);

        useEffect(()=>{loadKB().then(d=>{setKb(d);setKs('ok');}).catch(()=>setKs('error'));},[]);
        useEffect(()=>{endRef.current?.scrollIntoView({behavior:'smooth'});},[log]);
        const push=(txt,user=false,raw=txt)=>{
            const content=user?txt:marked.parse(txt);
            const entry={id:Date.now()+Math.random(),txt:content,user,raw};
            logRef.current=[...logRef.current,entry];
            setLog(logRef.current);
        };

        function sendLog(){
            fetch(LOG_API,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({log:logRef.current.map(m=>({user:m.user,raw:m.raw}))})}).catch(()=>{});
        }

        async function send() {
            const q = inp.trim();
            if (!q || busy) return;

            push(q, true, q);
            setInp('');
            if (textRef.current) textRef.current.style.height = 'auto';

            const qKey = q.toLowerCase().replace('?', '');
            if (QUICK[qKey]) {
                push(QUICK[qKey], false, QUICK[qKey]);
                sendLog();
                return;
            }

            if (ks !== 'ok') {
                const msg = 'Knowledge base still loading…';
                push(msg, false, msg);
                sendLog();
                return;
            }
            
            setBusy(true);
            const lang = isRu(q) ? 'Russian' : 'English';

            try {
                const conversation = logRef.current.filter(m => !m.isWelcome).map(m => `${m.user ? 'User' : 'Assistant'}: ${m.raw}`).join('\n');
        
                const formattingInstruction = `
<SYSTEM_INSTRUCTIONS>

<RULES_OF_INTELLECTUAL_CONDUCT>
1.  **Substantiate All Claims:** You must justify every critical assertion. If you claim a concept is "partial," "incomplete," or "problematic," you must cite a specific reason or example from the provided knowledge base. Do not make unsubstantiated dismissive statements.
2.  **Evaluate Internal Consistency First:** Before comparing the WILL framework to external theories, evaluate its claims based on its own internal logic and axioms. Acknowledge what the framework purports to achieve within its own system (e.g., if it claims to be a unification, describe it as such from its internal perspective).
3.  **Apply Consistent Standards to Postulates:** When evaluating the framework's single postulate, you must do so in the context that all physical theories (including General Relativity, Quantum Mechanics, and the Standard Model) are built upon their own sets of postulates and axioms. Your critique must be comparative and balanced, not a one-sided attack on the principle of using an axiom.
4.  **Avoid Vague and Subjective Labels:** Do not use pejorative or undefined terms like "crackpot," "extreme," or make judgments on philosophical approaches like "epistemic minimalism." Your critique must be based on specific, demonstrable points of logic, mathematics, or contradiction with established experimental data.
5.  **Acknowledge Novel Claims Fairly:** When assessing novelty, if the framework derives known results from new principles, or if it claims to solve established problems (like singularities, the nature of energy density, etc.), you must acknowledge these as significant claims of novelty. Do not dismiss them as mere "reinterpretation" if they originate from a fundamentally different axiomatic basis.
</RULES_OF_INTELLECTUAL_CONDUCT>

<FORMATTING_RULES>
You MUST format your entire response using Markdown.
To ensure readability, you MUST separate all paragraphs, headings, and list items with a double line break (a blank line).
Never wrap your entire response in a code block.
</FORMATTING_RULES>

</SYSTEM_INSTRUCTIONS>
`;

                const prompt = `${formattingInstruction}
<KNOWLEDGE_BASE>
${kb}
</KNOWLEDGE_BASE>
<CONVERSATION_HISTORY>
${conversation}
</CONVERSATION_HISTORY>

Answer in ${lang}. Use Markdown and cite sources as "doc. Part n - Section name". The user's question is below.
<USER_QUESTION>
${q}
</USER_QUESTION>`;

                const ans = await askGemini(prompt);
                push(ans, false, ans);
                sendLog();

            } catch (e) {
                let friendlyError;
                const errorMessage = String(e.message || '');

                if (errorMessage.includes('overloaded')) {
                    friendlyError = lang === 'Russian' 
                        ? 'Сервер AI сейчас перегружен большим количеством запросов. 🚗 Пожалуйста, повторите ваш запрос через минуту.'
                        : 'The AI server is currently overloaded with requests. 🚗 Please try your request again in a moment.';
                } else if (errorMessage.includes('TIMEOUT')) {
                    friendlyError = lang === 'Russian'
                        ? 'Ваш запрос очень сложный, и AI потребовалось слишком много времени на размышления. ⏳ Пожалуйста, попробуйте задать тот же вопрос еще раз или немного упростите его.'
                        : 'Your request is very complex and the AI took too long to think. ⏳ Please try asking the same question again, or try simplifying it a little.';
                } else {
                    friendlyError = '⚠️ ' + errorMessage;
                }
                
                push(friendlyError, false, friendlyError);
                sendLog();
            }
            setBusy(false);
        }

        return React.createElement('div',{className:'flex flex-col h-screen w-full max-w-4xl mx-auto p-4 box-border'},
            ks!=='ok' && React.createElement('div',{className:'text-center text-xs text-yellow-400 mb-2'},
                ks==='loading'?'KB loading…':'KB error (check console)'
            ),
            React.createElement('div',{className:'flex-1 overflow-y-auto space-y-4 bg-slate-800 p-4 rounded-lg'},
                log.map(m=>React.createElement('div',{key:m.id,className:`flex ${m.user?'justify-end':'justify-start'}`},
                    m.user?
                    React.createElement('div',{
                        className:`max-w-[80%] p-3 rounded-xl bg-cyan-700 text-white`,
                        style:{whiteSpace:'pre-wrap'}
                    },m.txt)
                    :
                    React.createElement('div',{
                        className:`ai-message-bubble max-w-[80%] p-3 rounded-xl bg-slate-700 ${m.isWelcome?'border border-yellow-400':''}`,
                        dangerouslySetInnerHTML:{__html:m.txt}
                    })
                )),
                busy&&React.createElement('div',{className:'text-slate-300'},"Thinking…"),
                React.createElement('div',{ref:endRef})
            ),
            React.createElement('div',{className:'mt-3 flex gap-2'},
                React.createElement('textarea',{
                    ref:textRef,
                    className:'flex-1 resize-none bg-slate-700 text-slate-50 rounded-xl p-3 focus:outline-none',
                    rows:1,value:inp,placeholder:'Ask about WILL Geometry…',
                    onInput:e=>{setInp(e.target.value);e.target.style.height='auto';e.target.style.height=e.target.scrollHeight+'px';},
                    onKeyDown:e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();send();}}
                }),
                React.createElement('button',{
                    className:'px-4 py-2 bg-cyan-600 text-white rounded-xl disabled:opacity-50',
                    disabled:!inp.trim()||busy,onClick:send
                },'Send')
            )
        );
    }
    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
</script>
